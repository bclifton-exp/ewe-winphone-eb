<Page
    x:Class="Expedia.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Expedia"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="using:Expedia.Client.Views"
    xmlns:converters="using:Expedia.Client.Converters"
    mc:Ignorable="d">

    <Page.Resources>
        <converters:BoolToVisibilityConverter x:Name="BoolToVisibilityConverter"/>
        <converters:SignInSignOutTextConverter x:Name="SignInSignOutTextConverter"/>
        <converters:IndexToPivotColorConverter x:Name="IndexToPivotColorConverter"/>
    </Page.Resources>
    
    <Grid>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="320" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="MenuFrame.Width" Value="320" />
                        <Setter Target="FirstStackPanel.Margin" Value="20 5 0 5"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="360" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="MenuFrame.Width" Value="360" />
                        <Setter Target="FirstStackPanel.Margin" Value="20 5 0 5"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="432" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="MenuFrame.Width" Value="432" />
                        <Setter Target="FirstStackPanel.Margin" Value="20 5 0 5"/>
                    </VisualState.Setters>
                </VisualState>

                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="600" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="MenuFrame.Width" Value="600" />
                        <Setter Target="FirstStackPanel.Margin" Value="70 5 0 5"/>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <SplitView x:Name="SplitView" DisplayMode="CompactOverlay" IsPaneOpen="{Binding IsFlyoutMenuOpen}" CompactPaneLength="0" OpenPaneLength="150">

            <SplitView.Pane>
                <StackPanel Background="Gray">

                    <Button x:Name="Settings" Margin="0 60 0 0" Background="Transparent" Command="{Binding GoToSettings}">
                        <StackPanel Orientation="Horizontal">
                            <Viewbox Height="35" Width="35">
                                <PathIcon Data="F1 M 37.6289,-0.000976563L 49.6289,-0.000976563L 52.8506,10.8311C 55.3838,11.5439 57.7979,12.542 60.0557,13.79L 70.0654,8.37012L 78.5518,16.8545L 73.1934,26.749C 74.4844,29.0117 75.5234,31.4365 76.2725,33.9863L 87.251,37.252L 87.251,49.252L 76.4746,52.457C 75.7588,55.1113 74.7295,57.6377 73.4297,59.9932L 78.8838,70.0645L 70.3994,78.5518L 60.4404,73.1582C 58.0811,74.5029 55.5439,75.5732 52.875,76.3252L 49.624,87.2549L 37.624,87.2549L 34.373,76.3232C 31.7061,75.5713 29.1729,74.501 26.8145,73.1572L 16.8574,78.5488L 8.37207,70.0635L 13.8262,59.9912C 12.5264,57.6357 11.498,55.1113 10.7822,52.458L 0,49.251L 0,37.251L 10.9854,33.9834C 11.7334,31.4365 12.7715,29.0137 14.0615,26.7529L 8.70313,16.8564L 17.1885,8.37012L 27.1982,13.791C 29.4561,12.542 31.8721,11.543 34.4072,10.8311L 37.6289,-0.000976563 Z M 43.9824,59.5264C 52.9834,59.5264 60.2803,52.2275 60.2803,43.2275C 60.2803,34.2266 52.9834,26.9277 43.9824,26.9277C 34.9824,26.9277 27.6826,34.2266 27.6826,43.2275C 27.6826,52.2275 34.9824,59.5264 43.9824,59.5264 Z "/>
                            </Viewbox>
                            <TextBlock Text="Settings" Margin="5 5 0 0" Style="{StaticResource MenuTextStyle}"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="Account" Background="Transparent" Margin="0 10 0 10" Command="{Binding GoToAccount}">
                        <StackPanel Orientation="Horizontal">
                            <Viewbox  Height="35" Width="35">
                                <PathIcon Data="F1 M 131.432,90.6536C 128.611,76.0937 89.7838,77.6419 80.4271,66.2396C 78.4531,63.8334 78.4531,63.8334 79.776,54.8972C 82.0338,44.8945 84.0807,51.103 87.3098,31.1524C 90.0235,14.3972 84.2357,1.52588e-005 66.6667,1.52588e-005C 49.0976,1.52588e-005 43.3105,14.3972 46.0228,31.1524C 49.252,51.103 51.2975,44.8945 53.5573,54.8972C 54.8802,63.8334 54.8802,63.8334 52.907,66.2396C 43.5495,77.6419 4.72269,76.0937 1.90106,90.6536C 1.56641,92.3763 0,101.911 0,101.911L 133.333,101.911C 133.333,101.911 131.767,92.3763 131.432,90.6536 Z "/>
                            </Viewbox>
                            <TextBlock Text="{Binding IsSignedIn, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource SignInSignOutTextConverter}}" Margin="5 9 0 0" Style="{StaticResource MenuTextStyle}"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="Itinerary" Background="Transparent" Margin="0 10 0 10">
                        <StackPanel Orientation="Horizontal">
                            <Viewbox Width="35" Height="35" Margin="0 -5 0 0">
                                <PathIcon Data="F1 M 6.14438,3.05176e-005L 0,3.05176e-005L 0,6.18002L 6.14438,6.18002L 6.14438,3.05176e-005 Z M 6.14438,9.12003L 0,9.12003L 0,15.3L 6.14438,15.3L 6.14438,9.12003 Z M 6.14438,17.7778L 0,17.7778L 0,23.9222L 6.14438,23.9222L 6.14438,17.7778 Z M 30.7699,1.96503L 10.2726,1.96503L 10.2726,5.17502L 30.7699,5.17502L 30.7699,1.96503 Z M 30.7699,11.085L 10.2726,11.085L 10.2726,14.295L 30.7699,14.295L 30.7699,11.085 Z M 30.7699,19.245L 10.2726,19.245L 10.2726,22.455L 30.7699,22.455L 30.7699,19.245 Z "/>
                            </Viewbox>
                            <TextBlock Text="Itinerary" Margin="6 2 0 0" Style="{StaticResource MenuTextStyle}"/>
                        </StackPanel>
                    </Button>

                </StackPanel>

            </SplitView.Pane>

            <SplitView.Content>
                <!--<Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

                    <Frame x:Name="ShellFrame">
                        <Frame.ContentTransitions>
                            <TransitionCollection>
                                <NavigationThemeTransition>
                                    <NavigationThemeTransition.DefaultNavigationTransitionInfo>
                                        <EntranceNavigationTransitionInfo />
                                    </NavigationThemeTransition.DefaultNavigationTransitionInfo>
                                </NavigationThemeTransition>
                            </TransitionCollection>
                        </Frame.ContentTransitions>
                    </Frame>

            </Grid>-->

                <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" >
                    <Pivot x:Name="PivotControl" Style="{StaticResource PivotStyleDynamicHeader}" >
                        <PivotItem Margin="0 0 0 0">
                            <PivotItem.Header>
                                <StackPanel x:Name="FirstStackPanel" Orientation="Vertical" Margin="70 5 0 5">
                                    <Viewbox Width="55" Height="45">
                                        <PathIcon Data="M11.7660012 13.2592703 C14.5899896 13.2531049 16.3892947 11.4920396 16.4023661 8.686778 C16.3892947 5.87927446 14.5899896 4.11876965 11.7660012 4.11428571 C8.92723639 4.11876965 7.12622628 5.87983495 7.1296362 8.686778 C7.12565796 11.4920396 8.92723639 13.2531049 11.7660012 13.2592703 M9.98693619 19.0937766 L20.032583 19.0937766 C21.5426127 19.0993815 23.1231141 18.1639207 23.1236824 16.8075304 L23.1236824 9.94879202 C23.1225458 6.28373599 18.493569 6.28373599 18.4873175 9.94879202 L18.4873175 14.5212843 L9.98693619 14.5212843 C6.17975198 14.5476274 6.17463709 19.0993815 9.98693619 19.0937766 M47.6268375 11.7725153 C47.6313841 9.19088998 46.0082585 7.19217614 42.9904726 7.20002303 L24.4444444 7.20002303 L24.4444444 19.3929621 L47.6268375 19.3929621 L47.6268375 11.7725153 M49.4553194 9.85891103 L49.4553194 20.5284334 L5.40928408 20.5284334 L5.40928408 3.0001726 C5.40303254 -1.00005753 -0.00397605472 -1.00005753 2.19419424e-06 3.0001726 L2.19419424e-06 35.0081791 L5.40928408 35.0081791 L5.40928408 26.6249029 L49.4553194 26.6249029 L49.4553194 35.0081791 L54.8646013 35.0081791 L54.8646013 9.85891103 C54.8788093 5.6389681 49.442248 5.6389681 49.4553194 9.85891103"/>
                                    </Viewbox>
                                    <Rectangle Fill="{Binding ElementName=PivotControl, Path=SelectedIndex, Converter={StaticResource IndexToPivotColorConverter}, ConverterParameter=0}" Margin="-30 0 -30 -6" Height="5" Width="110"/>
                                </StackPanel>
                               
                            </PivotItem.Header>
                            <Frame x:Name="HotelFrame" SourcePageType="views:SearchHotelsView">
                                <views:SearchHotelsView />
                            </Frame>
                        </PivotItem>
                        <PivotItem Margin="0 0 0 0">
                            <PivotItem.Header>
                                <StackPanel Orientation="Vertical" Margin="30 5 0 5">
                                <Viewbox Width="55" Height="45">
                                    <PathIcon Data="F1M23.716,0.284C23.476,0.044 23.18,-0.044 22.829,0.02 21.454,0.244 20.431,0.676 19.759,1.315 18.64,2.435 16.642,4.449 13.764,7.358L1.966,3.617C1.774,3.553,1.614,3.586,1.487,3.713L0,5.2 10.119,10.955 5.036,16.039 1.439,14.84 0,16.326 4.556,19.444 7.674,24 9.16,22.561 7.913,18.964 13.045,13.881 18.8,24 20.287,22.513C20.415,22.385,20.447,22.226,20.383,22.034L16.642,10.236 22.685,4.241C23.324,3.569 23.756,2.546 23.98,1.171 24.044,0.82 23.956,0.524 23.716,0.284"/>
                                </Viewbox>
                                    <Rectangle Fill="{Binding ElementName=PivotControl, Path=SelectedIndex, Converter={StaticResource IndexToPivotColorConverter}, ConverterParameter=1}" Margin="-30 0 -30 -6" Height="5" Width="110"/>
                                </StackPanel>
                            </PivotItem.Header>
                            <Frame x:Name="FlightFrame">
                                <TextBlock Text="planes and flights" />
                            </Frame>
                        </PivotItem>
                        <PivotItem Margin="0 0 0 0">
                            <PivotItem.Header>
                                <StackPanel Orientation="Vertical" Margin="30 5 0 5">
                                <Viewbox Width="55" Height="45" >
                                    <PathIcon Data="F1 M 121.233,38.2618L 110.305,10.0391C 108.26,4.63667 103.794,0.0390778 95.3399,1.52588e-005L 79.9271,1.52588e-005L 53.584,1.52588e-005L 37.9024,1.52588e-005C 29.4883,0.0390778 25.0215,4.63667 22.9402,10.0391L 12.0078,38.2618C 7.668,38.8216 -0.0130615,43.9219 0,53.5834L 0,89.5183L 10.6653,89.5183L 10.6653,100.988C 10.6387,115.13 30.6504,114.962 30.6452,100.988L 30.6452,89.5183L 66.6667,89.5183L 102.598,89.5183L 102.598,100.988C 102.641,114.962 122.654,115.13 122.667,100.988L 122.667,89.5183L 133.333,89.5183L 133.333,53.5834C 133.299,43.9219 125.613,38.8216 121.233,38.2618 Z M 20.9695,67.832C 15.8575,67.8463 11.7188,63.5834 11.7403,58.3385C 11.7188,53.0585 15.8575,48.7904 20.9695,48.8347C 26.0651,48.7904 30.2037,53.0585 30.1972,58.3385C 30.2037,63.5834 26.0639,67.8451 20.9695,67.832 Z M 66.6667,37.9962L 66.5775,37.9962L 23.388,37.9962L 31.6308,15.7722C 32.6256,12.6172 34.1693,10.3607 37.8157,10.306L 66.5775,10.306L 66.6667,10.306L 95.5208,10.306C 99.1107,10.3607 100.659,12.6159 101.701,15.7722L 109.945,37.9962L 66.6667,37.9962 Z M 112.365,67.832C 107.217,67.8463 103.075,63.5834 103.048,58.3385C 103.075,53.0585 107.217,48.7904 112.365,48.8347C 117.425,48.7904 121.563,53.0585 121.594,58.3385C 121.563,63.5834 117.425,67.8451 112.365,67.832 Z "/>
                                </Viewbox>
                                    <Rectangle Fill="{Binding ElementName=PivotControl, Path=SelectedIndex, Converter={StaticResource IndexToPivotColorConverter}, ConverterParameter=2}" Margin="-30 0 -30 -6" Height="5" Width="110"/>
                                </StackPanel>
                            </PivotItem.Header>
                            <Frame x:Name="CarFrame">
                                <TextBlock Text="Cars cars and more cars" />
                            </Frame>
                        </PivotItem>
                    </Pivot>

                    <Frame x:Name="MenuFrame" Width="550" HorizontalAlignment="Left" Visibility="{Binding IsMenuFrameVisible, Converter={StaticResource BoolToVisibilityConverter}}" />

                </Grid>
               
            </SplitView.Content>

        </SplitView>

        <Button FontFamily="Segoe MDL2 Assets" FontSize="32" Content="&#xE700;" Width="48" Height="45" Background="Transparent" VerticalAlignment="Top" Command="{Binding HamburgerClick}"/>

       

    </Grid>
</Page>
